@model KulturSanatPortal.Application.Events.EventDetailsDto
@using System.Globalization
@{
    var tr = new CultureInfo("tr-TR");
    ViewData["Title"] = Model.Title;
    var hero = !string.IsNullOrWhiteSpace(Model.HeroImagePath)
        ? Url.Content(Model.HeroImagePath!)
        : $"https://picsum.photos/seed/ev{Model.Id}/1400/600";
}

<div class="mb-3 card-admin overflow-hidden">
    <div class="position-relative" style="aspect-ratio:16/7;">
        <img src="@hero" alt="@Model.Title" class="w-100 h-100" style="object-fit:cover;" />
        <div class="position-absolute bottom-0 start-0 end-0 p-3 p-md-4"
             style="background:linear-gradient(180deg,rgba(0,0,0,.02),rgba(0,0,0,.55));color:#fff;">
            <div class="small opacity-75 mb-1">
                <i class="bi bi-clock"></i>
                @Model.StartLocal.ToString("dd MMM yyyy HH:mm", tr)
                – @Model.EndLocal.ToString("HH:mm", tr)
                &nbsp;·&nbsp;<i class="bi bi-geo-alt"></i> @Model.VenueName
                &nbsp;·&nbsp;<i class="bi bi-tag"></i> @Model.CategoryName
            </div>
            <h1 class="h3 fw-bold m-0">@Model.Title</h1>
        </div>
    </div>
</div>

<div class="row g-4">
    <div class="col-lg-8">
        @if (!string.IsNullOrWhiteSpace(Model.Summary))
        {
            <p class="lead">@Model.Summary</p>
        }

        @if (!string.IsNullOrWhiteSpace(Model.DescriptionHtml))
        {
            <article class="card-admin p-3">@Html.Raw(Model.DescriptionHtml)</article>
        }

        @if (Model.Gallery?.Any() == true)
        {
            <div class="mt-3">
                <div class="gallery">
                    @foreach (var g in Model.Gallery)
                    {
                        var p = Url.Content(g);
                        <a href="@p" target="_blank" rel="noopener">
                            <img src="@p" alt="@Model.Title" loading="lazy" decoding="async" />
                        </a>
                    }
                </div>
            </div>
        }
    </div>

    <aside class="col-lg-4">
        <div class="card-admin p-3">
            <div class="fw-semibold mb-2">Bilgiler</div>
            <div class="small mb-2">
                <i class="bi bi-clock"></i>
                @Model.StartLocal.ToString("dd.MM.yyyy HH:mm", tr) – @Model.EndLocal.ToString("HH:mm", tr)
            </div>
            <div class="small mb-2"><i class="bi bi-geo-alt"></i> @Model.VenueName</div>
            <div class="small mb-2"><i class="bi bi-tag"></i> @Model.CategoryName</div>

            @if (!string.IsNullOrWhiteSpace(Model.PriceInfo))
            {
                <div class="small mb-2"><i class="bi bi-cash-coin"></i> @Model.PriceInfo</div>
            }

            <div class="d-grid gap-2 mt-3">
                @if (!string.IsNullOrWhiteSpace(Model.TicketUrl))
                {
                    <a class="btn btn-primary" href="@Model.TicketUrl" target="_blank" rel="noopener">
                        <i class="bi bi-ticket-perforated"></i> Bilet Al
                    </a>
                }
                <a class="btn btn-outline-secondary" asp-action="Index">
                    <i class="bi bi-arrow-left"></i> Etkinliklere Dön
                </a>
            </div>
        </div>
    </aside>
</div>
